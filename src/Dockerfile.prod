FROM python:3.10

RUN python3 -m pip install poetry 
RUN python3 -m pip install uvicorn 
ADD ./src/pyproject.toml .
ADD ./src/poetry.lock .
RUN poetry export -o requirements.txt
RUN python3 -m pip install -r requirements.txt
COPY ./src/app /app/app
COPY ./src/manage.py /app/manage.py
WORKDIR /app

CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "6666"]
